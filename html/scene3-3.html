<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="uft-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Scene3-3</title>
        <link rel="stylesheet" href="../styles/scene3.css">
        <script src="js/script.js"></script>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="js/creativa-popup.js" type="text/javascript"></script>
        <link rel="stylesheet" href="../styles/nav.css">
        <script src="../js/nav.js"></script>
        <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    </head>

    <body>

        <!-- <div id="loading">
            <img id="loading-bg" src="../assets/images/scene1BG.png" alt="space background" />
            <img id="loading-image" src="../assets/images/ezgif.com-gif-maker.gif" alt="Loading..." />
            <p class="loading-txt">Loading...</p>
        </div>     -->
        
        <audio autoplay loop id="bg-music">
            <source src="../assets/audio/bgm/Serenity_-_Aakash_Gandhi.mp3" type="audio/mpeg" />
        </audio>

        <audio autoplay id="btn-se">
            <source src="../assets/audio/soundEffects/scene2/button.wav" type="audio/wav" />
        </audio>

        <audio id="pickup-se">
            <source src="../assets/audio/soundEffects/scene3/paper-poster-pickup.mp3" type="audio/mpeg" />
        </audio>

        <header class="page-header">
            <div class="hamburger-menu">
                <input id="menu__toggle" type="checkbox" />
                <label class="menu__btn" for="menu__toggle">
                    <span></span>
                </label>
            
                <ul class="menu__box">
                    <div class="menu__div">
                        <div class="chapter-menu">
                            <ul class="chapter__list">
                                <li><a class="chapter__item" id="ch-Home" href="../index.html">Home</a></li>
                                <li><a class="chapter__item" id="chapter0" href="prologue.html">Prologue</a></li>
                                <li><a class="chapter__item" id="chapter1" href="scene1-1.html">Chapter 1</a></li>
                                <li><a class="chapter__item" id="chapter2" href="scene3-1.html" style="color: #30C9E9">Chapter 2</a></li>
                                <li><a class="chapter__item" id="chapter3" href="scene5.html">Chapter 3</a></li>
                                <li><a class="chapter__item" id="chapter4" href="scene6-1.html">Chapter 4</a></li>
                                <li><a class="chapter__item" id="chapter5" href="scene8.html">Chapter 5</a></li>
                            </ul>
                        </div>
                        <br><hr><br>
                        <div class="menu__info">
                            <span class="iconify menu__icon" data-icon="ant-design:info-circle-filled"></span>
                            <h1 class="about"> About Sincerely, Earth</h1>
                            <p>
                                Sincerely, Earth is a dynamic storytelling website that provides an educational and immersive experience about climate change. Through this experience, we hope to inspire the next generation to become more aware and motivated to make a change.
                            </p>
                            <div class="present" style="display: flex">
                                <div id="teamLogo" style="display: block; width: fit-content">
                                    <p style="font-size:1.4vh; color: black; margin-top:0">Presented By</p>
                                    <img src="../assets/images/eco_logo.png" alt="EcoLife Studio Logo" style="max-width: 8vh; margin-top:-5px">
                                </div>
                                <div id="mktSite" style="width: fit-content">
                                    <a class="mktSiteLink" href="https://ecolifestudio5.wixsite.com/ecolife-studio" >Learn More <span class="iconify" data-icon="ci:external-link"></span></a>
                                </div>
                            </div>
                        </div>
                        <br><hr><br>
                        <div class="list">
                            <span class="iconify menu__item" data-icon="ion:help-circle-sharp"></span>
                            <span id="on" class="iconify menu__item" data-icon="teenyicons:sound-on-outline" onClick="soundOff()" style="display: inline"></span>
                            <span id="off" class="iconify menu__item" data-icon="teenyicons:sound-off-solid" onClick="soundOn()" style="display: none"></span>
                        </div>
                    </div> 
                </ul>    
            </div>  
        </header>

        <div id="s2-1" class="scene" style="display: block;">
            <div>
                <img class="image" src="../assets/images/scene3/room empty with items.png" alt="Inside a room">
                <img class="flyer1" onclick="loadHenry(); playEffect('pickup-se')" src="../assets/images/scene3/flyer 1.png" alt="flyer 1" title="See Campaign Flier">
                <img class="flyer2" onclick="loadEvelyn(); playEffect('pickup-se')" src="../assets/images/scene3/flyer 2.png" alt="flyer 2" title="See Campaign Flier">
                <img class="tv" src="../assets/images/scene3/tv1.png" onclick="window.location.href='scene3-2.html'" alt="tv" title="Watch T.V">
                <img class="poster1" id="Evelyn" onclick="myFunction2();" src="../assets/images/scene3/poster1.png" alt="poster1">
                <img class="poster2" id="Henry" onclick="myFunction2();" src="../assets/images/scene3/poster2.png" alt="poster2">
            </div>
            
        </div>

        <div id="s2-2" class="scene" style="display: none;">
            <div id="bg3" class="image">
                <img class="img-bg" src="../assets/images/scene3/scene3-4.png" alt="Girl sitting on a sofa">
                <!-- <img class="teleport-button" onclick="loadPopup()" src="img/teleport.svg" alt="teleport-button"> -->
            </div>
            <div class="text" >
                <div id="box3" class="speechbox-Aeryn" >
                    <p><b>Aeryn:</b> If this prime minister is so against climate change, then what he considers a threat, which seems to be this scientist, must be someone who can help me. I should give her a visit.</p>
                </div>
            </div>
        </div>

        <div id="s2-3" class="scene" style="display:none;">
            <div id="bg3" class="image">
                <img class="img-bg" src="../assets/images/scene3/scene3-4.png" alt="Girl sitting on a sofa">
            </div>
            <img class="popup-travel" id="popup1" src="../assets/images/scene3/scene3-5-1.png" alt="would you like to travel">
            <img class="yes-button" id="popup2" onclick="window.location.href='scene4.html'; playEffect('btn-se')" src="../assets/images/scene3/yes.png" alt="yes button" style="display:none;">
            <div class="inventory">
                <img id="inventory-bg" src="../assets/images/scene3/inventory.png" alt="inventory box">
                <div class="icons">
                    <img id="camera-lock" class="lock" src="../assets/images/scene3/lock.png" alt="camera item" style="display: block;">
                    <img id="map-lock" class="lock" src="../assets/images/scene3/lock.png" alt="map item" style="display: block;">
                    <img id="app-icon" class="icon" src="../assets/images/scene3/icon.png" alt="app item" style="display: block;" onclick="loadPopup(); playEffect('btn-se')">
                </div>
            </div>
        </div>

        <div id="nextBtn" class="btn2" style="display: none;"></div> 
        
        <script>

            // $(window).on('load', function () {
            //     $('#loading').hide();
            // }) 

            /*------Changing div with next and prev button------*/

            //store the divs of the specified className into an array
            var IdStore = new Array();
            function storeSceneId(){
                var className = document.getElementsByClassName('scene');
                var classNameCount = className.length;
                
                for(var j = 0; j < classNameCount; j++){
                    IdStore.push(className[j].id);
                }
                console.log(IdStore);
            }
            storeSceneId();
            
            //show or hide the div when next button is clicked
            var currentIndex = 0;
            
            var next = document.getElementById("nextBtn");
            next.addEventListener("click", function(i) {

                //hide next button when clicked each time
                document.getElementById('nextBtn').style.display= "none";

                if (currentIndex < IdStore.length-1) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];

                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }

                    //next button appearing after 3 second
                    setTimeout(appeardiv, 500);
                    function appeardiv() {
                        //not appear for the last cut
                        if (currentIndex < IdStore.length-1) {
                            document.getElementById('nextBtn').style.display= "block";
                        }
                        
                    }

                } 
            });

            //control next nav by keyboard
            document.addEventListener('keydown', function(event) {               

                if ((event.keyCode == 39) && (currentIndex < IdStore.length-1)) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];

                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }

                } else if ((event.keyCode == 37) && (currentIndex >= 1)) { //show or hide the div when prev button is clicked
                    var divId = IdStore[currentIndex];
                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "none";
                    currentIndex -= 1;
                    console.log(currentIndex);
                    var divId2 = IdStore[currentIndex];
                    document.getElementById(divId2).style.display = "block";
                } 
            });

            //make button appear after specific time
            window.onload = function () {
                setTimeout(appeardiv, 500);
            }

            function appeardiv() {
                document.getElementById('nextBtn').style.display= "block";
            }

           //Retrieving changed name from local storage
            var inputVal = localStorage.getItem("newName");
            console.log(inputVal);

            if (inputVal == "" || inputVal == null){

                var all2 = document.querySelectorAll('p');

                all2.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, "Aeryn"));
                console.log("name is null");
            }

            else{
                var all = document.querySelectorAll('p');
                all.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, inputVal));
            }
            
            function loadHenry() {
                var x = document.getElementById("Henry");
                if (x.style.visibility === "visible") {
                    x.style.visibility = "hidden";
                } else {
                    x.style.visibility = "visible";
                }
                document.getElementById('Evelyn').style.visibility='hidden';
            }

            function loadEvelyn() {
                var x = document.getElementById("Evelyn");
                if (x.style.visibility === "visible") {
                    x.style.visibility = "hidden";
                } else {
                    x.style.visibility = "visible";
                }
                document.getElementById('Henry').style.visibility='hidden';
            }

            function loadPopup() {
                document.getElementById('popup1').style.display='block';
                document.getElementById('popup2').style.display='block';
            }

            document.getElementById("bg-music").volume = 0.05;
            

            function soundOff() {
                document.getElementById("bg-music").muted = true;  
                document.getElementById("btn-se").muted = true;  
                document.getElementById("pickup-se").muted = true;  
                document.getElementById("on").style.display = "none";
                document.getElementById("off").style.display = "inline";
            }

            function soundOn() {
                document.getElementById("bg-music").muted = false; 
                document.getElementById("btn-se").muted = false;  
                document.getElementById("pickup-se").muted = false; 
                document.getElementById("off").style.display = "none"; 
                document.getElementById("on").style.display = "inline";
            }

            function playEffect(sound) {

                var soundEffect2 = document.getElementById(sound);
                soundEffect2.play();

            }
        </script>
    </body>
</html>
