<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="uft-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <title>Scene4</title>
        <link rel="stylesheet" href="../styles/scene4.css">
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
        <link rel="stylesheet" href="../styles/nav.css">
        <script src="../js/nav.js"></script>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    </head>

    <body>

        <audio autoplay loop id="bg-music">
            <source src="../assets/audio/bgm/No.4_Piano_Journey_-_Esther_Abrami.mp3" type="audio/mpeg" />
        </audio>

        <audio id="add-se">
            <source src="../assets/audio/soundEffects/scene4/add-to-inventory.wav" type="audio/mpeg" />
        </audio>

        <audio autoplay loop id="lab-se">
            <source src="../assets/audio/soundEffects/scene4/lab.ogg" type="audio/mpeg" />
        </audio>

        <audio  id="btn-se">
            <source src="../assets/audio/soundEffects/scene2/button.wav" type="audio/wav" />
        </audio>
    
        <!-- <div id="loading">
            <img id="loading-bg" src="../assets/images/scene1BG.png" alt="space background" />
            <img id="loading-image" src="../assets/images/ezgif.com-gif-maker.gif" alt="Loading..." />
            <p class="loading-txt">Loading...</p>
        </div>     -->

        <header class="page-header">
            <div class="hamburger-menu">
                <input id="menu__toggle" type="checkbox" />
                <label class="menu__btn" for="menu__toggle">
                    <span></span>
                </label>
            
                <ul class="menu__box">
                    <div class="menu__div">
                        <div class="chapter-menu">
                            <ul class="chapter__list">
                                <li><a class="chapter__item" id="ch-Home" href="../index.html">Home</a></li>
                                <li><a class="chapter__item" id="chapter0" href="prologue.html">Prologue</a></li>
                                <li><a class="chapter__item" id="chapter1" href="scene1-1.html">Chapter 1</a></li>
                                <li><a class="chapter__item" id="chapter2" href="scene3-1.html" style="color: #30C9E9">Chapter 2</a></li>
                                <li><a class="chapter__item" id="chapter3" href="scene5.html">Chapter 3</a></li>
                                <li><a class="chapter__item" id="chapter4" href="scene6-1.html">Chapter 4</a></li>
                                <li><a class="chapter__item" id="chapter5" href="scene8.html">Chapter 5</a></li>
                            </ul>
                        </div>
                        <br><hr><br>
                        <div class="menu__info">
                            <span class="iconify menu__icon" data-icon="ant-design:info-circle-filled"></span>
                            <h1 class="about"> About Sincerely, Earth</h1>
                            <p>
                                Sincerely, Earth is a dynamic storytelling website that provides an educational and immersive experience about climate change. Through this experience, we hope to inspire the next generation to become more aware and motivated to make a change.
                            </p>
                            <div class="present" style="display: flex">
                                <div id="teamLogo" style="display: block; width: fit-content">
                                    <p style="font-size:1.4vh; color: black; margin-top:0">Presented By</p>
                                    <img src="../assets/images/eco_logo.png" alt="EcoLife Studio Logo" style="max-width: 8vh; margin-top:-5px">
                                </div>
                                <div id="mktSite" style="width: fit-content">
                                    <a class="mktSiteLink" href="https://ecolifestudio5.wixsite.com/ecolife-studio" >Learn More <span class="iconify" data-icon="ci:external-link"></span></a>
                                </div>
                            </div>
                        </div>
                        <br><hr><br>
                        <div class="list">
                            <span class="iconify menu__item" data-icon="ion:help-circle-sharp"></span>
                            <span id="on" class="iconify menu__item" data-icon="teenyicons:sound-on-outline" onClick="soundOff()" style="display: inline"></span>
                            <span id="off" class="iconify menu__item" data-icon="teenyicons:sound-off-solid" onClick="soundOn()" style="display: none"></span>
                        </div>
                    </div> 
                </ul>    
            </div>  
        </header>

        <!--Frame 1-->
        <div id="s4-1" class="scene" style="display: block;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut1.png" alt="Scientist Robin sitting in the laboratory">
            </div>  
        </div>

        <!--Frame 2-->
        <div id="s4-2" class="scene" style="display: none;">
            <div id="bg2" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut2.png" alt="While Robin is working in the lab, the girl suddenly appears in the room.">
            </div>
            <div class="text">
                <div id="box1" class="speechbox" >
                    <p><b>Robin:</b> Ah! Am I hallucinating or did you just appear out of thin air?!</p>
                </div>
            </div>
        </div>
        <div id="s4-2a" class="scene" style="display: none;">
            <div id="bg2" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut2.png" alt="While Robin is working in the lab, the girl suddenly appears in the room.">
            </div>
            <div class="text" >
                <div id="box2" class="speechbox" >
                    <p><b>Aeryn:</b> Would you think you're going crazy if I said I'm from the future?</p>
                </div>
            </div>
        </div>

        <!--Frame 3-->
        <div id="s4-3" class="scene" style="display: none;">
            <div id="bg3" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut3.png" alt="Robin looks surprised">
            </div>
            <div class="text" >
                <div id="box3" class="speechbox" >
                    <p><b>Robin:</b> Yes, but nothing quite surprises me anymore, we have also had accounts of time travel reported in the past, saying they were from a parallel dimension.</p>
                </div>
            </div>
        </div>
        <div id="s4-3a" class="scene" style="display: none;">
            <div id="bg3" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut3.png" alt="Robin looks surprised">
            </div>
            <div class="text" >
                <div id="box4" class="speechbox" >
                    <p><b>Aeryn:</b> Well I did just teleport here, and I am from a parallel dimension.</p>
                </div>
            </div>
        </div>
        <div id="s4-3b" class="scene" style="display: none;">
            <div id="bg3" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut3.png" alt="Robin looks surprised">
            </div>
            <div class="text" >
                <div id="box5" class="speechbox" >
                    <p><b>Robin:</b> Now I am insanely curious, you need to tell me everything.</p>
                </div>
            </div>
        </div>

        <!--Frame 4-->
        <div id="s4-4" class="scene" style="display: none;">
            <!-- <div id="bg4" class="image">
                <img class="img-bg" src="../assets/images/scene4/s4-bg2.png" alt="Laboratory room wall">
            </div> -->
            <video class="clock" autoplay loop>
                <source src="../assets/motionGraphics/clock.mp4" alt="clock ticking" type="video/mp4">
                Your browser does not support the video tag.  
            </video>
            <div id="headerText" class="text" >
                <h1 class="center-text">Moments Later...</h1>
            </div>
        </div>

        <!--Frame 5-->
        <div id="s4-5a" class="scene" style="display: none;">
            <div id="bg5" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut5.png" alt="Robin and the girl are talking with each other">
            </div>
            <div class="text" >
                <div id="box6" class="speechbox" >
                    <p><b>Aeryn:</b> So now that you know everything, I want to know how I can help you with solving climate change. Because as you know, your Earth in this dimension is headed for the same fate as ours.</p>
                </div>
            </div>
        </div>
        <div id="s4-5b" class="scene" style="display: none;">
            <div id="bg5" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut5.png" alt="Robin and the girl are talking with each other">
            </div>
            <div class="text" >
                <div id="box7" class="speechbox" >
                    <p><b>Robin:</b> Why did you choose to come to me from everyone though?</p>
                </div>
            </div>
        </div>
        <div id="s4-5c" class="scene" style="display: none;">
            <div id="bg5" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut5.png" alt="Robin and the girl are talking with each other">
            </div>
            <div class="text" >
                <div id="box8" class="speechbox" >
                    <p><b>Aeryn:</b> I heard the prime minister talking about you, he seemed to be against you for wanting to spread awareness on climate change, so I figured you were my best bet.</p>
                </div>
            </div>
        </div>

        <!--Frame 6-->
        <div id="s4-6" class="scene" style="display: none;">
            <div id="bg6" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box9" class="speechbox" >
                    <p><b>Robin:</b> Ah yes, Henry Adams, my favorite arch nemesis *sarcasm* I used to work for this lab with a group of scientists to study the effects of global warming before he was elected. Once he was elected he stopped funding us and passed a law against spreading false information.</p>
                </div>
            </div>
        </div>
        <div id="s4-6a" class="scene" style="display: none;">
            <div id="bg6" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box10" class="speechbox" >
                    <p><b>Robin:</b> Of course his own propaganda wasn't considered false, but my years of research was. I am quite outspoken of course and wouldn't back down from my research and spreading information about climate change, so I spent a couple months in jail for that.</p>
                </div>
            </div>
        </div>
        <div id="s4-6b" class="scene" style="display: none;">
            <div id="bg6" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box11" class="speechbox" >
                    <p><b>Robin:</b> Some people cared, but a lot started becoming ignorant of climate change since he would spew lies about it and create a lot of jobs in industries like oil and coal, taking us behind in solving this crisis.</p>
                </div>
            </div>
        </div>

        <!--Frame 7-->
        <div id="s4-7" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box12" class="speechbox" >
                    <p><b>Aeryn:</b> Oh wow he really took this place backwards. What can we do to change things?</p>
                </div>
            </div>
        </div>
        <div id="s4-7a" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box13" class="speechbox" >
                    <p><b>Robin:</b> Well the election is in a couple weeks. There’s another leader running I want elected who wants to solve the climate problem in this country, Evelyn Antoine, but her popularity is low and chance of winning is slim.</p>
                </div>
            </div>
        </div>
        <div id="s4-7b" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box14" class="speechbox" >
                    <p><b>Robin:</b> Before I got put in jail I planned on travelling to some of the most climate change affected places on Earth and sharing it with people to bring awareness to the situation. Unfortunately I don't think I have time for all that now.</p>
                </div>
            </div>
        </div>
        <div id="s4-7c" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box15" class="speechbox" >
                    <p><b>Aeryn:</b> Well did I mention I have a teleportation device? We can go anywhere you like.</p>
                </div>
            </div>
        </div>
        <div id="s4-7d" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box16" class="speechbox" >
                    <p><b>Robin:</b> Oh yes that is right! I have a map with the countries I want to visit, since you have the teleportation device you can choose where to go first.</p>
                </div>
            </div>
        </div>
        <div id="s4-7e" class="scene" style="display: none;">
            <div id="bg7" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut6.png" alt="Robin talking to the girl">
            </div>
            <div class="text" >
                <div id="box17" class="speechbox" >
                    <p><b>Robin:</b> When we get to the location I need you to take photos with my camera so I can post it on social media to spread awareness, this is the first way to make a change and show Canadians why they should care about climate change.</p>
                </div>
            </div>
        </div> 

        <!--Frame 8-->
        <div id="s4-8b" class="scene" style="display: none;">
            <div id="bg6" class="image">
                <img class="img-bg" src="../assets/images/scene4/cut8.png" alt="Girl sitting in front of a table">
            </div>
            <div id="items">
                <img id="map" class="item clickable" src="../assets/images/scene4/map1.png" title="Map" onclick="mapOnclick(); playEffect('add-se')" alt="Map on a table">
                <img id="camera" class="item clickable" src="../assets/images/scene4/gopro1.png" title="Camera" onclick=" playEffect('add-se')" alt="Camera on a table">
                <!-- <img id="explained" class="explained" src="../assets/images/scene4/explained.png" alt="popularity meter explained"> -->
            </div>
            <div id="explained" class="explained" >
                <p><b>Popularity Meter Explained</b><br><br>Above the inventory you can find the popularity count that represents the population of Canada.
                To influence the public to vote for a leader that cares about climate change, it's important to spread awareness. Make sure to reach above 50% in the popularity meter so that atleast
                half of Canadians are inspired by you to vote for the right leader.</p>
            </div>
    
            <div class="inventory">
                <img id="inventory-bg" src="../assets/images/scene4/inventory.png" alt="inventory box">
                <div class="icons">
                    <img id="camera-icon" class="icon" src="../assets/images/scene4/icon-cam.png" alt="camera disabled" title="Disabled" style="display: none; pointer-events: none; filter: grayscale(100%);">
                    <img id="map-icon" class="icon clickable" src="../assets/images/scene4/icon-map.png" alt="map item" style="display: none;" onclick= "openCh3(); playEffect('btn-se'); window.location.href='scene5.html'" title="Map">
                    <img id="camera-lock" class="lock" src="../assets/images/scene4/lock.png" alt="locked item" style="display: block;" title="Locked">
                    <img id="map-lock" class="lock" src="../assets/images/scene4/lock.png" alt="locked item" style="display: block;" title="Locked">
                    <img id="teleport-icon" class="icon" src="../assets/images/scene4/icon.png" alt="teleport button disabled" title="Disabled" style="display: block; pointer-events: none; filter: grayscale(100%);">
                </div>
            </div>
            
        </div>

        <div id="nextBtn" class="btn2" style="display: none;"></div>
        

        <script>

            // $(window).on('load', function () {
            //     $('#loading').hide();
            // }) 

            /*------Changing div with next and prev button------*/

            //store the divs of the specified className into an array
            var IdStore = new Array();
            function storeSceneId(){
                var className = document.getElementsByClassName('scene');
                var classNameCount = className.length;
                
                for(var j = 0; j < classNameCount; j++){
                    IdStore.push(className[j].id);
                }
                console.log(IdStore);
            }
            storeSceneId();
            
            //show or hide the div when next button is clicked
            var currentIndex = 0
            
            var next = document.getElementById("nextBtn");
            next.addEventListener("click", function(i) {               
                
                //hide next button when clicked each time
                document.getElementById('nextBtn').style.display= "none";

                if (currentIndex < IdStore.length-1) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];
                
                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }
                    
                    //next button appearing after 3 second
                    setTimeout(appeardiv, 500);
                    function appeardiv() {
                        //not appear for the last cut
                        if (currentIndex < IdStore.length-1) {
                            document.getElementById('nextBtn').style.display= "block";
                        }
                        
                    }
                }
            }); 

            //control next nav by keyboard
            document.addEventListener('keydown', function(event) {               

                if ((event.keyCode == 39) && (currentIndex < IdStore.length-1)) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];

                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }

                } else if ((event.keyCode == 37) && (currentIndex >= 1)) { //show or hide the div when prev button is clicked
                    var divId = IdStore[currentIndex];
                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "none";
                    currentIndex -= 1;
                    console.log(currentIndex);
                    var divId2 = IdStore[currentIndex];
                    document.getElementById(divId2).style.display = "block";
                } 
            });

            var collectCam = document.getElementById("camera");
            var collectMap = document.getElementById("map");

            collectCam.addEventListener("click", function(i) {
                console.log('cam collected');
                document.getElementById("camera").style.display = "none";
                document.getElementById("camera-icon").style.display = "block";
                document.getElementById("camera-icon").style.display = "block";
                document.getElementById("camera-lock").style.display = "none";
            });

            collectMap.addEventListener("click", function(i) {
                console.log('map collected');
                document.getElementById("map").style.display = "none";
                document.getElementById("map-icon").style.display = "block";
                document.getElementById("map-lock").style.display = "none";
            });
            
            //make button appear after specific time
            window.onload = function () {
                setTimeout(appeardiv, 500);
            }

            function appeardiv() {
                document.getElementById('nextBtn').style.display= "block";
            }

            document.getElementById("bg-music").volume = 0.05;

            document.getElementById("lab-se").volume = 0.15;

            document.getElementById("add-se").volume = 0.15;

            //Retrieving changed name from local storage
            var inputVal = localStorage.getItem("newName");
            console.log(inputVal);

            if (inputVal == "" || inputVal == null){

                var all2 = document.querySelectorAll('p');

                all2.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, "Aeryn"));
                console.log("name is null");
            }

            else{
                var all = document.querySelectorAll('p');
                all.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, inputVal));
            }

            function mapOnclick() {
                document.getElementById('explained').style.visibility= "visible";
            }
            
            function openCh3() {
                localStorage.setItem("ch3-lock", 1);
            }

            function soundOff() {
                document.getElementById("bg-music").muted = true;  
                document.getElementById("add-se").muted = true; 
                document.getElementById("btn-se").muted = true; 
                document.getElementById("lab-se").muted = true; 
                document.getElementById("on").style.display = "none";
                document.getElementById("off").style.display = "inline";
            }

            function soundOn() {
                document.getElementById("bg-music").muted = false; 
                document.getElementById("add-se").muted = false; 
                document.getElementById("btn-se").muted = false; 
                document.getElementById("lab-se").muted = false;
                document.getElementById("off").style.display = "none"; 
                document.getElementById("on").style.display = "inline";
            }


            function playEffect(sound) {

                var soundEffect2 = document.getElementById(sound);
                soundEffect2.play();

            }

        </script>
        
    </body>
    
</html>