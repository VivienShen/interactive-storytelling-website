<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="uft-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <title>Scene8</title>
        <link rel="stylesheet" href="../styles/scene8.css">
        <link rel="stylesheet" href="../styles/nav.css">
        <script src="../js/nav.js"></script>
        <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    </head>

    <body> 

        <audio autoplay loop id="bg-music">
            <source src="../assets/audio/bgm/Serenity_-_Aakash_Gandhi.mp3" type="audio/mpeg" />
        </audio>

        <!-- <div id="loading">
            <img id="loading-bg" src="../assets/images/scene1BG.png" alt="space background" />
            <img id="loading-image" src="../assets/images/ezgif.com-gif-maker.gif" alt="Loading..." />
            <p class="loading-txt">Loading...</p>
        </div> -->

        <header class="page-header">
            <div class="hamburger-menu">
                <input id="menu__toggle" type="checkbox" />
                <label class="menu__btn" for="menu__toggle">
                    <span></span>
                </label>
            
                <ul class="menu__box">
                    <div class="menu__div">
                        <div class="chapter-menu">
                            <ul class="chapter__list">
                                <li><a class="chapter__item" id="ch-Home" href="../index.html">Home</a></li>
                                <li><a class="chapter__item" id="chapter0" href="prologue.html">Prologue</a></li>
                                <li><a class="chapter__item" id="chapter1" href="scene1-1.html">Chapter 1</a></li>
                                <li><a class="chapter__item" id="chapter2" href="scene3-1.html">Chapter 2</a></li>
                                <li><a class="chapter__item" id="chapter3" href="scene5.html">Chapter 3</a></li>
                                <li><a class="chapter__item" id="chapter4" href="scene6-1.html">Chapter 4</a></li>
                                <li><a class="chapter__item" id="chapter5" href="scene8.html" style="color: #30C9E9">Chapter 5</a></li>
                            </ul>
                        </div>
                        <br><hr><br>
                        <div class="menu__info">
                            <span class="iconify menu__icon" data-icon="ant-design:info-circle-filled"></span>
                            <h1 class="about"> About Sincerely, Earth</h1>
                            <p>
                                Sincerely, Earth is a dynamic storytelling website that provides an educational and immersive experience about climate change. Through this experience, we hope to inspire the next generation to become more aware and motivated to make a change.
                            </p>
                            <div class="present" style="display: flex">
                                <div id="teamLogo" style="display: block; width: fit-content">
                                    <p style="font-size:1.4vh; color: black; margin-top:0">Presented By</p>
                                    <img src="../assets/images/eco_logo.png" alt="EcoLife Studio Logo" style="max-width: 8vh; margin-top:-5px">
                                </div>
                                <div id="mktSite" style="width: fit-content">
                                    <a class="mktSiteLink" href="https://ecolifestudio5.wixsite.com/ecolife-studio" >Learn More <span class="iconify" data-icon="ci:external-link"></span></a>
                                </div>
                            </div>
                        </div>
                        <br><hr><br>
                        <div class="list">
                            <span class="iconify menu__item" data-icon="ion:help-circle-sharp"></span>
                            <span id="on" class="iconify menu__item" data-icon="teenyicons:sound-on-outline" onClick="soundOff()" style="display: inline"></span>
                            <span id="off" class="iconify menu__item" data-icon="teenyicons:sound-off-solid" onClick="soundOn()" style="display: none"></span>
                        </div>
                    </div> 
                </ul>    
            </div>  
        </header>


        <div id="s8-1" class="scene" style="display: block;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/1.png" alt="Aeryn sitting on a couch, watching TV">
            </div>
            <div class="text">
                <div id="box2" class="speechbox" >
                    <p><b>Aeryn:</b> Today’s the day of the election, lets see who ends up winning on T.V with the most seats in parliament.</p>
                </div>
            </div>
        </div>

        <div id="s8-2" class="scene image" style="display: none;">
            <video class="img-bg" autoplay >
                <source src="../assets/motionGraphics//polls_1.mp4" alt="poll results" type="video/mp4">
                Your browser does not support the video tag.  
            </video>
        </div>

        <div id="s8-3" class="scene" style="display: none;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/3.png" alt="Evelyn giving speech on TV">
            </div>
            <div class="text">
                <div id="box2" class="speechbox-henry" >
                    <p><b>Evelyn:</b> I want to thank all of you for voting for me and choosing to fight for our future and our Earth. 
                        For so many years the Privilege party has been in charge and finally it is our turn to take over and make the right change happen.</p>
                </div>
            </div>
        </div>

        <div id="s8-4" class="scene" style="display: none;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/3.png" alt="Evelyn giving speech on TV">
            </div>
            <div class="text">
                <div id="box2" class="speechbox-henry" >
                    <p><b>Evelyn:</b> I couldn’t have done this without our volunteers, sponsors, and most importantly Scientist Robin and Aeryn. 
                        They inspired Canadians to realize how important it is to fight this climate crisis together, and I hope I can take the reins to create that change for our country.
                    </p>
                </div>
            </div>
        </div>

        <div id="s8-5" class="scene" style="display: none;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/4-1.png" alt="Aeryn cheering on the couch, her phone rings">
            </div>
            <div class="text">
                <div id="box2" class="speechbox-Aeryn" >
                    <p><b>Aeryn:</b> Yes! I’m so glad she won a majority in parliament.</p>
                </div>
            </div>

            <audio id="phone-se">
                <source src="../assets/audio/soundEffects/scene6/phone-ring.wav" type="audio/mpeg" />
            </audio>

        </div>

        <div id="s8-6" class="scene" style="display: none;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/5.png" alt="Aeryn pick up the phone">
            </div>
            <div class="text">
                <div id="box2" class="speechbox1" >
                    <p><b>Robin:</b> Aeryn we did it! I also got a call from Evelyn Antoine’s office, she wants to meet us as soon as possible to discuss something. 
                        Meet us in the parliament as soon as you can.</p>
                </div>
            </div>
        </div>

        <div id="s8-7" class="scene" style="display: none;">
            <div id="bg1" class="image">
                <img class="img-bg" src="../assets/images/scene8/5.png" alt="parliament teleport selection">
            </div>
            <img class="popup-travel" id="popup1" src="../assets/images/scene8/modal.png" alt="would you like to travel">
            <img class="yes-button" id="popup2" onclick="window.location.href='scene9.html'" src="../assets/images/scene8/yes.png" alt="yes button" style="display:none">
            <div class="inventory">
                <img id="inventory-bg" src="../assets/images/scene8/inventory-2.png" alt="inventory box">
                <div class="icons">
                    <img id="camera-icon" class="icon" src="../assets/images/scene8/icon-cam.png" alt="camera item" style="display: block;pointer-events: none; filter: grayscale(100%);">
                    <img id="map-icon" class="icon" src="../assets/images/scene8/icon-map.png" alt="map item" style="display: block;pointer-events: none; filter: grayscale(100%);">
                    <img id="app-icon" class="icon" src="../assets/images/scene8/icon.png" alt="app item" style="display: block;" onclick="loadPopup()">
                </div>
            </div>
        </div>

        <div id="nextBtn" class="btn2"  style="display: none;"></div> 

        <div class="dividers" id="divider1" style="display: block;" >
            <a href="#" id="fill" class="fill-div">
                <img id="ch1" class="chapter" src="../assets/images/chapter 5.png" alt="Chapter 5">
                <p class="chapStart">Click anywhere to close</p>
            </a>
        </div>

        <script>

            // $(window).on('load', function () {
            //     $('#loading').hide();
            // }) 

            //Chapter Divider
            var ch1 = document.getElementById("ch1");
            var chap1 = document.getElementById("divider1");
            $(".fill-div").click(function() {
                document.getElementById('fill').className = 'chapAni';
                document.getElementById('divider1').className = 'divAni';
                if (ch1.style.opacity == 0){
                    console.log("hide");
                    setTimeout(function () {
                        chap1.style.display = "none";
                    }, 800);
                }
            });

            /*------Changing div with next and prev button------*/

            //store the divs of the specified className into an array
            var IdStore = new Array();
            function storeSceneId(){
                var className = document.getElementsByClassName('scene');
                var classNameCount = className.length;
                
                for(var j = 0; j < classNameCount; j++){
                    IdStore.push(className[j].id);
                }
                console.log(IdStore);
            }
            storeSceneId();
            
            //show or hide the div when next button is clicked
            var currentIndex = 0;
            
            var next = document.getElementById("nextBtn");
            next.addEventListener("click", function(i) {

                //hide next button when clicked each time
                document.getElementById('nextBtn').style.display= "none";

                if (currentIndex < IdStore.length-1) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];

                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }

                    if(currentIndex == 4){
                        document.getElementById("phone-se").play();
                    }
                    else if(currentIndex == 5){
                        document.getElementById("phone-se").pause();
                    }

                    //next button appearing after 3 second
                    setTimeout(appeardiv, 500);
                    function appeardiv() {
                        //not appear for the last cut
                        if (currentIndex < IdStore.length-1) {
                            document.getElementById('nextBtn').style.display= "block";
                        }
                        
                    }

                } 
            });

            //control next nav by keyboard
            document.addEventListener('keydown', function(event) {               

                if ((event.keyCode == 39) && (currentIndex < IdStore.length-1)) {
                    console.log('next'); 
                    currentIndex += 1;
                    console.log(currentIndex);
                    var divId = IdStore[currentIndex];

                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "block";
                    var prevIndex = currentIndex - 1;
                    console.log(prevIndex);
                    if (prevIndex >= 0) {
                        var preId = IdStore[prevIndex];
                        document.getElementById(preId).style.display = "none";
                    }

                } else if ((event.keyCode == 37) && (currentIndex >= 1)) { //show or hide the div when prev button is clicked
                    var divId = IdStore[currentIndex];
                    console.log(divId, currentIndex);
                    document.getElementById(divId).style.display = "none";
                    currentIndex -= 1;
                    console.log(currentIndex);
                    var divId2 = IdStore[currentIndex];
                    document.getElementById(divId2).style.display = "block";
                } 
            });

            //make button appear after specific time
            window.onload = function () {
                setTimeout(appeardiv, 500);
            }

            function appeardiv() {
                document.getElementById('nextBtn').style.display= "block";
            }

            function loadHenry() {
                var x = document.getElementById("Henry");
            if (x.style.visibility === "visible") {
                x.style.visibility = "hidden";
            } else {
                x.style.visibility = "visible";
            }
                document.getElementById('Evelyn').style.visibility='hidden';
            }

            function loadEvelyn() {
                var x = document.getElementById("Evelyn");
                if (x.style.visibility === "visible") {
                x.style.visibility = "hidden";
            } else {
                x.style.visibility = "visible";
            }
                document.getElementById('Henry').style.visibility='hidden';
            }

            function loadPopup() {
                document.getElementById('popup1').style.display='block';
                document.getElementById('popup2').style.display='block';
            }

            document.getElementById("bg-music").volume = 0.05;

            //Retrieving changed name from local storage
            var inputVal = localStorage.getItem("newName");
            console.log(inputVal);

            if (inputVal == "" || inputVal == null){

                var all2 = document.querySelectorAll('p');

                all2.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, "Aeryn"));
                console.log("name is null");
            }

            else{
                var all = document.querySelectorAll('p');
                all.forEach(x => x.innerHTML = x.innerHTML.replace(/Aeryn/gi, inputVal));
            }

            function soundOff() {
                document.getElementById("bg-music").muted = true;  
                document.getElementById("on").style.display = "none";
                document.getElementById("off").style.display = "inline";
            }

            function soundOn() {
                document.getElementById("bg-music").muted = false; 
                document.getElementById("off").style.display = "none"; 
                document.getElementById("on").style.display = "inline";
            }

            document.getElementById("phone-se").volume = 0.05;
        </script>
    </body>
</html>
