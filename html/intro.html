<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scene 1</title>
    <link rel="stylesheet" href="../styles/scene1.css">
    <link rel="stylesheet" href="../styles/intro.css">
</head>
<body>

    <audio autoplay loop id="bg-music">
        <source src="../assets/audio/bgm/Earth_Appears_-_Brian_Bolger.mp3" type="audio/mpeg" />
    </audio>


    <img class="logo" src="../assets/images/scene1/earthLetter.png">
        
    <!-- <div class="mouse_scroll">
		<div>
			<span class="m_scroll_arrows unu"></span>
			<span class="m_scroll_arrows doi"></span>
			<span class="m_scroll_arrows trei"></span>
		</div>
    </div>  
    
    <h2 class="title" >Scroll to start</h2> -->

    <div class="start-btn">
        <button class="btn" onclick="scrollWin(); playAudio()">Click to Start</button>
    </div>
    
    <div class="envelope">
        <img class="envelope-closed" src="../assets/images/scene1/envelopeClosedStart-04.png">
        <img class="envelope-open" src="../assets/images/scene1/envelope_front2-03-03.png">
        <img class="envelope-plants" src="../assets/images/scene1/plantsLetter-03.png">
        <img class="letter" src="../assets/images/scene1/letterStart-03.png">
        <img class="envelope-open" src="../assets/images/scene1/envelope_front-03.png">
        <canvas id ="canvas" width="700" height="700"></canvas>
    </div>

    <div class="btn2" onclick="window.location.href='scene1.html'"></div> 


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>

    <script src="https://unpkg.com/rive-js"></script> 

    <script>

        const tl = gsap.timeline({
            scrollTrigger:{
                trigger: '.envelope-closed',
                start: "top 120%", //starts when element reaches center of scroll bar
                end: "top -50%",
               // pin: true,        // pins/fixes element on screen for given amount fo time (start to end) 
                scrub: 1.5,
                //markers: true,
            }
        });


        tl.to(".envelope-closed", {y: -620, duration: 800})
        .to(".envelope-closed", {opacity: 0, duration: 5})
        .to(".envelope-open", {opacity: 1, duration: 8})
        .to(".letter, .envelope-plants", {transform: "scale(1)", duration: 20})
        .to(".btn2", {display: "block", delay: 20})

        //rive stuff
        // new rive.Rive({
        // src: 'envelope.riv',
        // canvas: document.getElementById('canvas'),
        // autoplay: true
        // });

        function scrollWin() {

            window.scrollTo(0, 1700);

        } 

        var bgMusic = document.getElementById("bg-music");

        function playAudio() {

            bgMusic.play();

        }
        
        document.getElementById("bg-music").volume = 0.2;

        var timer = setTimeout(function() {
            window.location='scene1.html'
        }, 3000);

    </script>
</body>
</html>