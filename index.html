<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Home - Sincerely, Earth</title>
    <link rel="stylesheet" href="styles/scene1.css">
    <link rel="stylesheet" href="styles/intro.css">
    <link rel="stylesheet" href="styles/nav.css">
    <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    <script src="js/nav.js"></script>

    <style>
        
        /* Style the button */
        button {
            padding: 20px;
            font-size: 20px;
            position: absolute;
            top: 10%;
        }
        </style>
</head>
<body>

    <!-- <div id="loading">
        <img id="loading-bg" src="../assets/images/scene1BG.png" alt="space background" />
        <img id="loading-image" src="../assets/images/ezgif.com-gif-maker.gif" alt="Loading..." />
        <p class="loading-txt">Loading...</p>
    </div> -->

    <audio loop id="bg-music">
        <source src="assets/audio/bgm/Earth_Appears_-_Brian_Bolger.mp3" type="audio/mpeg" />
    </audio>

    <!-- <div id="bg1" class="image">
        <img class="img-bg" src="../assets/images/scene1BG.png" alt="in the laboratory">
            
    </div> -->

    <video class="stars" autoplay loop>
        <source src="assets/motionGraphics/stars.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <img class="logo" id="logo" src="assets/images/scene1/earthLetter.png" alt="logo of the Earth">
        
    <!-- <div class="mouse_scroll">
		<div>
			<span class="m_scroll_arrows unu"></span>
			<span class="m_scroll_arrows doi"></span>
			<span class="m_scroll_arrows trei"></span>
		</div>
    </div>  
    
    <h2 class="title" >Scroll to start</h2> -->
    <header class="page-header">
        <div class="hamburger-menu">
            <input id="menu__toggle" type="checkbox" />
            <label class="menu__btn" for="menu__toggle">
                <span></span>
            </label>
        
            <ul class="menu__box">
                <div class="menu__div">
                    <div class="chapter-menu">
                        <ul class="chapter__list">
                            <li><a class="chapter__item" id="ch-Home" href="index.html" style="color: #30C9E9">Home</a></li>
                            <li><a class="chapter__item" id="chapter0" href="html/prologue.html">Prologue</a></li>
                            <li><a class="chapter__item" id="chapter1" href="html/scene1-1.html">Chapter 1</a></li>
                            <li><a class="chapter__item" id="chapter2" href="html/scene3-1.html">Chapter 2</a></li>
                            <li><a class="chapter__item" id="chapter3" href="html/scene5.html">Chapter 3</a></li>
                            <li><a class="chapter__item" id="chapter4" href="html/scene6-1.html">Chapter 4</a></li>
                            <li><a class="chapter__item" id="chapter5" href="html/scene8.html">Chapter 5</a></li>
                        </ul>
                    </div>
                    <br><hr><br>
                    <div class="menu__info">
                        <span class="iconify menu__icon" data-icon="ant-design:info-circle-filled"></span>
                        <h1 class="about"> About Sincerely, Earth</h1>
                        <p>
                            Sincerely, Earth is a dynamic storytelling website that provides an educational and immersive experience about climate change. Through this experience, we hope to inspire the next generation to become more aware and motivated to make a change.
                        </p>
                        <div class="present" style="display: flex">
                            <div id="teamLogo" style="display: block; width: fit-content">
                                <p class="present">Presented By</p>
                                <img src="assets/images/eco_logo.png" alt="EcoLife Studio Logo" style="max-width: 8vh; margin-top:-5px">
                            </div>
                            <div id="mktSite" style="width: fit-content">
                                <a class="mktSiteLink" href="https://ecolifestudio5.wixsite.com/ecolife-studio" >Learn More <span class="iconify" data-icon="ci:external-link"></span></a>
                            </div>
                        </div>
                    </div>
                    <br><hr><br>
                    <div class="list">
                        <span class="iconify menu__item" data-icon="ion:help-circle-sharp"></span>
                        <span id="on" class="iconify menu__item" data-icon="teenyicons:sound-on-outline" onClick="soundOff()" style="display: inline"></span>
                        <span id="off" class="iconify menu__item" data-icon="teenyicons:sound-off-solid" onClick="soundOn()" style="display: none"></span>
                    </div>
                </div>
            </ul>
        </div>  
    </header>

    <div class="start-btn" id="start">
        <button class="btn" onclick="scrollWin(); playAudio()">Click to Start</button>
    </div>
    
    <!-- <div class="envelope">
        <img class="envelope-closed" src="../assets/images/scene1/envelopeClosedStart-04.png">
        <img class="envelope-open" src="../assets/images/scene1/envelope_front2-03-03.png">
        <img class="envelope-plants" src="../assets/images/scene1/plantsLetter-03.png">
        <img class="letter" src="../assets/images/scene1/letterStart-03.png">
        <img class="envelope-open" src="../assets/images/scene1/envelope_front-03.png">
        <canvas id ="canvas" width="700" height="700"></canvas>
    </div> -->

    <canvas id="canvas" width="2000" height="2000" ></canvas>

    <div class="btn2" id="next" style="display:none" onclick="openCh0(); window.location.href='html/prologue.html'">
        <span class="tooltiptext">Click here to go next or use the left and right arrow keys</span>
    </div> 

    <p class="disclaimer" id="disclaimer" style="display:none">PLEASE NOTE THAT WHILE INFORMATION ON GLOBAL WARMING IN THIS STORY IS BASED ON CURRENT RESEARCH, THE CHARACTERS AND SITUATIONS ARE FICTIONAL.</p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>

    <script src="https://unpkg.com/rive-js"></script>

    <script>

        // $(window).on('load', function () {
        //     $('#loading').hide();
        // }) 

        window.onload = (event) => {
            window.pageYOffset = 0;
            // document.documentElement.scrollTop = 3004;
        };

        console.log(document.documentElement.scrollTop);

        const tl = gsap.timeline({
            scrollTrigger:{
                trigger: '.envelope-closed',
                start: "top 120%", //starts when element reaches center of scroll bar
                end: "top -50%",
               // pin: true,        // pins/fixes element on screen for given amount fo time (start to end) 
                scrub: 1.5,
                //markers: true,
            }
        });


        tl.to(".envelope-closed", {y: -600, duration: 800})
        .to(".envelope-closed", {opacity: 0, duration: 5})
        .to(".envelope-open", {opacity: 1, duration: 8})
        .to(".letter, .envelope-plants", {transform: "scale(1)", duration: 20})
        .to(".btn2", {display: "block", delay: 20})

        //rive stuff
        // new rive.Rive({
        // src: 'envelope.riv',
        // canvas: document.getElementById('canvas'),
        // autoplay: true
        // });

        function scrollWin() {

            // window.scrollTo(0, 1700);

            var disclaimer = document.getElementById("disclaimer");
            var btn = document.getElementById("start");
            var logo = document.getElementById("logo");
            var next = document.getElementById("next");

            
            btn.style.display = "none";
            logo.style.opacity = 0;

            setTimeout(startAnim, 3000);

            function startAnim() {

                disclaimer.style.display ="block";
                next.style.display ="block";
            }

            //Intro ANIMATION
            const r = new rive.Rive({
                    src: 'assets/envStart.riv',
                    canvas: document.getElementById('canvas'),
                    autoplay: true,
                    stateMachines: 'State Machine 2',
                    fit: rive.Fit.cover,
                    onLoad: (_) => {
                        const inputs = r.stateMachineInputs('State Machine 2')
                        const trigger = inputs.find(i => i.name === 'Trigger 2')
                
                            trigger.fire();
                        
                    }
                });

        } 

        var bgMusic = document.getElementById("bg-music");

        function playAudio() {

            bgMusic.play();

        }
        
        document.getElementById("bg-music").volume = 0.05;

        var elem = document.documentElement;
        function openFullscreen() {
            if (elem.requestFullscreen) {
                elem.requestFullscreen();

            } else if (elem.msRequestFullscreen) { /* IE11 */
                elem.msRequestFullscreen();
            }
        }

        function openCh0() {
            localStorage.setItem("ch0-lock", 1);
        }

        function soundOff() {
            document.getElementById("bg-music").muted = true;  
            document.getElementById("on").style.display = "none";
            document.getElementById("off").style.display = "inline";
            localStorage.setItem("sound", false);
            console.log("muted");
        }

        function soundOn() {
            document.getElementById("bg-music").muted = false; 
            document.getElementById("off").style.display = "none"; 
            document.getElementById("on").style.display = "inline";
            localStorage.setItem("sound", true);
            console.log("unmuted");
        }

    </script>
</body>
</html>